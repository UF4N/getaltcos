# Режимы работы с репозиторием - обновление, добавление, удаление пакетов

Работа с репозиторием в основном сводится к следующим основным режимам:
- обновление текущего репозитория (`apt-get update; apt-get dist-upgrade`);
- формирование нового репозитория пуьем добавления или ужаления пакетов
  (`apt-get install ...;`, `apt-get remove ...` );
- "ручной" корректировке, добавлению или удалению файлов.

Во всех случаях процесс состоит из следующих стадий:
1. формирование дерево файловой системы из репозитория (`ostree chechout ...` или `ostree deploy ...`)
2. корректировка созданного дерева;
3. формирование на основе скорректированного дерева новой ветки репозитория (`ostree commit ...`).

Так как эти действия (установку или удаления новых пакетов с созданием новой ветки) будет производит пользователь по REST-запросу, необходимо максимально уменьшить время выполнения этих операций. 

Разворачивание дерева (`ostree checkout`) производится достаточно быстро - доли секунды (создаются лищь каталоги и жесткие ссылки на существующие файлы).   

Основную проблему представляет второй этап. 

